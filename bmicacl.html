<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="stylebmi.css" />
    <title>BMI Calculator</title>
  </head>

  <body>
    <div class="wrap">
      <div class="container" role="region" aria-labelledby="page-title">
        <h1 id="page-title">BMI Calculator</h1>

        <form id="bmi-form" novalidate>
          <p>
            <label for="height">Height (cm)</label>
            <input type="number" id="height" placeholder="e.g. 170" required />
          </p>

          <p>
            <label for="weight">Weight (kg)</label>
            <input type="number" id="weight" placeholder="e.g. 65" required />
          </p>

          <div class="controls">
            <button type="submit" id="calc">Calculate</button>
            <button type="button" id="reset">Reset</button>
            <button type="button" id="copy">Copy</button>
          </div>

          <div id="results">
            <div id="bmi-value"></div>
            <div id="bmi-category"></div>
            <div id="bmi-message"></div>
          </div>

          <div id="weight-guide">
            <h3>BMI Weight Guide</h3>
            <p>Underweight &lt; 18.6</p>
            <p>Normal 18.6 – 24.9</p>
            <p>Overweight ≥ 24.9</p>
          </div>
        </form>
      </div>
    </div>

    <script>
      const heightEl = document.getElementById('height');
      const weightEl = document.getElementById('weight');
      const bmiValue = document.getElementById('bmi-value');
      const bmiCategory = document.getElementById('bmi-category');
      const bmiMessage = document.getElementById('bmi-message');
      const resetBtn = document.getElementById('reset');
      const copyBtn = document.getElementById('copy');

      function classify(bmi) {
        if (bmi < 18.6)
          return {
            label: 'Underweight',
            cls: 'cat under',
            msg: 'You are under the normal weight range.'
          };

        if (bmi < 24.9)
          return {
            label: 'Normal',
            cls: 'cat normal',
            msg: 'Good — your weight is in the normal range.'
          };

        return {
          label: 'Overweight',
          cls: 'cat over',
          msg: 'You are above the normal weight range.'
        };
      }

      function clearResults() {
        bmiValue.textContent = '';
        bmiCategory.textContent = '';
        bmiCategory.className = '';
        bmiMessage.textContent = '';
      }

      document.getElementById('bmi-form').addEventListener('submit', e => {
        e.preventDefault();
        clearResults();

        const height = parseFloat(heightEl.value);
        const weight = parseFloat(weightEl.value);

        if (!height || height <= 0) {
          bmiMessage.textContent = 'Please enter a valid height.';
          return;
        }

        if (!weight || weight <= 0) {
          bmiMessage.textContent = 'Please enter a valid weight.';
          return;
        }

        const bmi = weight / Math.pow(height / 100, 2);
        const bmiRounded = bmi.toFixed(2);
        const info = classify(bmi);

        bmiValue.textContent = `BMI: ${bmiRounded}`;
        bmiCategory.textContent = info.label;
        bmiCategory.className = info.cls;
        bmiMessage.textContent = info.msg;
      });

      resetBtn.addEventListener('click', () => {
        heightEl.value = '';
        weightEl.value = '';
        clearResults();
      });

      copyBtn.addEventListener('click', async () => {
        if (!bmiValue.textContent) return;

        const text = `${bmiValue.textContent} — ${bmiCategory.textContent}`;
        try {
          await navigator.clipboard.writeText(text);
          bmiMessage.textContent = 'Result copied.';
        } catch (e) {
          bmiMessage.textContent = 'Unable to copy.';
        }
      });

      document.addEventListener('keydown', e => {
        if (e.key === 'Escape') resetBtn.click();
      });
    </script>
  </body>
</html>
